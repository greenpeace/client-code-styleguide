!function(a,b){"use strict";var c=a.p3||{},d={pageURL:!1,popup:{width:800,height:600},networks:{facebook:{enabled:!0,url:"http://www.facebook.com/sharer.php?u=__REFERRER__",count:0},twitter:{enabled:!0,url:"https://twitter.com/intent/tweet?original_referer=__REFERRER__&source=tweetbutton&text=__TITLE__&url=__REFERRER__&via=__ACCOUNT__",count:0,title:!1,account:"greenpeace"},google:{enabled:!0,url:"https://plus.google.com/share?url=__REFERRER__",count:0},linkedin:{enabled:!0,url:"https://www.linkedin.com/cws/share?url=__REFERRER__&original_referer=__REFERRER__",count:0},pinterest:{enabled:!0,url:"http://pinterest.com/pin/create/button/?url=__REFERRER__&media=__IMAGE__&description=__DESCRIPTION__",count:0,image:!1,description:!1}},precision:1,jsonURL:"https://www.greenpeace.org/api/p3/pledge/social.json"};c.social_sharing=function(c,e){function h(a){for(var b=a+"",c=b.split("."),d=c[0],e=c.length>1&&1*c[1]>0&&100>a?"."+c[1].replace(/0+$/,""):"",f=/(\d+)(\d{3})/;f.test(d);)d=d.replace(f,"$1,$2");return d+e}function i(a){if(a=1*a,1e4>a)return h(a);for(var b=["","K","M","G","T","P","E"],c=a,d=0;c>1e3;)c/=1e3,d++;return h(1*c.toFixed(f.precision))+b[d]}function j(){f.pageURL===!1&&(console.log("WARNING page referrer URL is not set, using "+window.location.href),f.pageURL=window.location.href),a.each(f.networks,function(b,c){if(c.enabled!==!1){var d=a("li."+b,g),e=a(".counter span",d),h=a("a",d),j=c.url;switch(b){case"pinterest":c.image===!1&&(console.log("WARNING Pinterest sharing requires an image."),c.image=""),c.description===!1&&(console.log("WARNING Pinterest sharing requires a description."),c.description=""),j=j.replace("__IMAGE__",encodeURIComponent(c.image)),j=j.replace("__DESCRIPTION__",encodeURIComponent(c.description));break;case"twitter":c.title===!1&&(console.log("WARNING Twitter sharing requires a title."),c.title=""),j=j.replace("__TITLE__",encodeURIComponent(c.title)),j=j.replace("__ACCOUNT__",encodeURIComponent(c.account))}h.attr({href:j.replace(/__REFERRER__/g,encodeURIComponent(f.pageURL)),target:"_blank"}),e.text(i(c.count))}else console.log(b+" disabled")})}var f=a.extend(!0,d,e||{}),g=a(c);b.load({test:window.JSON,nope:["js/v03/lib/json.min.js"],complete:function(){a.getJSON(f.jsonURL,function(b){if(a.extend(!0,f,b),"success"!==b.status)throw new Error("Status: "+b.status+": server reported a problem");j()}).error(function(){throw new Error("Failed to load JSON: "+f.jsonURL)})}})},a.p3=c}(jQuery,Modernizr);