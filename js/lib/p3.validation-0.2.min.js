!function(a,b){"use strict";var c=a.p3||{},d={loadGetParams:!0,jsonURL:"https://www.greenpeace.org/api/p3/pledge/config.json",tests:{alphaPlus:"^[\\p{L}\\p{N}\\.\\-\\'\\,\\/]+$",numeric:"^\\p{N}+$",alpha:"^\\p{L}+$"},showSummary:!1,fallbackHTML5:!0,errorElement:"span",errorPlacement:function(b,c){a(c).parent().find("div.message").html(b)},params:{},messageElement:'<div class="message"></div>'};c.validation=function(c,e){var f=a.extend(!0,d,e||{}),g=a.p3.request(f.jsonURL),h={url:g.url,parameters:a.extend(!0,g.parameters,f.params)};f.showSummary&&(f.summaryElement=a(".errorSummary",c).length?a(".errorSummary",c):a(c).prepend('<div class="errorSummary"></div>')),b.load({test:window.JSON,nope:["js/v03/lib/json.min.js"],complete:function(){var b=a(c),d=b.is("form")?b:a("form",c);if(f.loadGetParams){var e=a.p3.request(window.location.href).parameters;a.each(e,function(b,c){a("input[name="+b+"]",d).val(c)})}a.getJSON(h.url,h.parameters,function(b){var c=f.messageElement;a.extend(!0,f,b||{}),a.each(f.tests,function(b,c){try{a.validator.addMethod(b,function(a,b){var d=new XRegExp(c);return this.optional(b)||d.test(a)})}catch(d){}}),d.find("div.input.required").each(function(){var b=a(this);b.find("div.message").length||b.append(c)}),d.validate(f),f.loadGetParams&&1==e.auto_sign&&d.submit()}).error(function(){if(console.log("WARNING: JSON failed to load from: "+f.jsonURL),!f.fallbackHTML5)throw a("input[type=submit]",c).attr("disabled","disabled").addClass("disabled"),new Error("Form input disabled");console.log("WARNING: Using native HTML5 validation")})}})},a.p3=c}(jQuery,Modernizr);